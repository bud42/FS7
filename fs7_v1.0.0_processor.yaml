---
moreauto: true
procversion: 1.0.0
procname: fs7
proctype: fs7_v1
inputs:
  default:
    container_path: fs7_latest_new.sif
    container_source: shub://bud42/fs7
  xnat:
    scans:
      - name: scan_t1
        types: T1
        needs_qc: True
        resources:
          - resource: NIFTI
            varname: t1_nifti
            fdest: T1.nii.gz
            fcount: 1
            fmatch: '*.nii.gz'
            ftype: FILE
outputs:
  - path: stats.txt
    type: FILE
    resource: STATS
  - path: report.pdf
    type: FILE
    resource: PDF
  - path: subjects/SUBJECT
    type: DIR
    resource: DATA
command: >-
  singularity
  run
  -B $INDIR:/INPUTS
  -B $OUTDIR:/OUTPUTS
  -B $HOME/freesurfer_license.txt:/usr/local/freesurfer/.license
  {container_path}
attrs:
  walltime: 3-0
  memory: 16G

# TODO:
# assume xsitype: proc:genProcData
# assume ppn: 1
# assume jobtemplate: job_template.txt
# default to varname=var1 or something random
# assume fcount=1, assume fmatch: *, assum ftype is FILE
